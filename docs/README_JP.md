# 🤖 Claude Engineer

Claude Engineerは、Anthropic社のClaude 3およびClaude 3.5モデルの能力を活用し、幅広いソフトウェア開発タスクを支援する高度なインタラクティブコマンドラインインターフェース（CLI）です。このツールは、最先端の大規模言語モデルの機能と、実用的なファイルシステム操作、Web検索機能、インテリジェントなコード分析、および実行機能をシームレスに組み合わせています。

## ✨ 機能

- 💬 Claude 3およびClaude 3.5モデルとのインタラクティブなチャットインターフェース
- 📁 包括的なファイルシステム操作（フォルダ作成、ファイル作成、ファイルの読み書き）
- 🔍 Tavily APIを使用した最新情報のWeb検索機能
- 🌈 コードスニペットの強化された構文ハイライト
- 🏗️ インテリジェントなプロジェクト構造の作成と管理
- 🧐 高度なコード分析と改善提案
- 🖼️ ターミナルでのドラッグ＆ドロップをサポートした画像分析機能
- 🚀 効率的な自律タスク完了のための改善されたオートモード
- 🔄 オートモードにおける堅牢な反復追跡と管理
- 📊 制御されたコード修正のための精密な差分ベースのファイル編集
- 🛡️ 強化されたエラー処理とツール使用の詳細な出力
- 🎨 可読性向上のためのRichライブラリを使用したカラーコード化されたターミナル出力
- 🔧 ツールの使用と結果の詳細なロギング
- 🔁 読み取りと適用のステップを分離した改善されたファイル編集ワークフロー
- 🧠 オートモードの状態に基づく動的なシステムプロンプト更新
- 🔍 ツールの使用と出力を検証するTOOLCHECKERMODEL
- 📝 専門的なコード編集タスクのためのCODEEDITORMODEL
- 🖥️ コード実行結果を分析するCODEEXECUTIONMODEL
- 📊 各モデルの入力、出力、および合計のトークン使用量の追跡
- 🪟 残りのコンテキストウィンドウの表示
- 💾 チャットログの保存機能
- 🔒 分離された仮想環境による強化されたコード実行機能
- 🔄 長時間実行されるコードの実行のためのプロセス管理

## 🛠️ インストール

1. このリポジトリをクローンします：
   ```
   git clone https://github.com/doriandarko/claude-engineer.git
   cd claude-engineer
   ```

2. 必要な依存関係をインストールします：
   ```
   pip install -r requirements.txt
   ```

3. 環境変数を設定します：
   - プロジェクトのルートディレクトリに`.env`ファイルを作成します
   - 以下の環境変数を追加します：
     ```
     ANTHROPIC_API_KEY=your_anthropic_api_key
     TAVILY_API_KEY=your_tavily_api_key
     ```

4. コード実行用の仮想環境をセットアップします：
   Engineerは、コードを初めて実行する際に、コードを実行するための仮想環境を作成します。
   これは、メインスクリプトをデフォルトの環境ではなく仮想環境で実行したい場合のためのものです。
   ```
   python -m venv code_execution_env
   source code_execution_env/bin/activate  # Windowsの場合、次を使用: code_execution_env\Scripts\activate
   pip install -r requirements.txt
   deactivate
   ```

## 🚀 使用方法

メインスクリプトを実行してClaude Engineerインターフェースを開始します：

```
python main.py
```

開始後、クエリやコマンドを入力してClaude Engineerと対話できます。いくつかの対話例：

- "Webアプリケーション用の新しいPythonプロジェクト構造を作成して"
- "file.pyのコードを説明し、改善点を提案して"
- "Reactの最新のベストプラクティスを検索して"
- "このエラーをデバッグするのを手伝って：[エラーメッセージを貼り付け]"
- "この画像を分析して内容を説明して"
- "このPythonコードを実行して結果を分析して"

特別なコマンド：
- 'exit'と入力すると、会話を終了しアプリケーションを閉じます。
- 'image'と入力すると、分析用の画像をメッセージに含めることができます。
- 'reset'と入力すると、スクリプトを再起動せずに会話全体をリセットします。
- 'automode number'と入力すると、指定した回数の反復で自律モードに入ります。
- 'save'と入力すると、現在のチャットログを保存します。
- いつでもCtrl+Cを押すと、オートモードを終了して通常のチャットに戻ります。

各対話の後、Claude Engineerは以下を表示します：
- 現在のモデルのトークン使用量（入力、出力、合計）
- 残りのコンテキストウィンドウサイズ

### コード実行とプロセス管理

Claude Engineerは、分離された仮想環境でのコード実行をサポートしています：

1. `execute_code`ツールを使用して、Pythonコードを安全に実行します。
2. 長時間実行されるプロセスは`stop_process`ツールを使用して管理できます。
3. CODEEXECUTIONMODELが実行結果を分析し、洞察を提供します。

### 異なるAIモデルの使用

Claude Engineerは複数の専門化されたAIモデルを利用します：

- MAINMODEL：一般的な対話のためのClaude 3またはClaude 3.5
- TOOLCHECKERMODEL：ツールの使用と出力を検証
- CODEEDITORMODEL：専門的なコード編集タスクを実行
- CODEEXECUTIONMODEL：コード実行結果を分析

スクリプトは、タスクに応じて適切なモデルを自動的に選択します。

### 🤖 改善されたオートモード

強化されたオートモードにより、Claudeは複雑なタスクをより効率的かつ制御されたやり方で自律的に作業できます。オートモード時：

1. Claudeはあなたのリクエストに基づいて明確で達成可能な目標を設定します。
2. これらの目標を一つずつ、必要に応じて利用可能なツールを使用しながら進めていきます。
3. Claudeは現在の反復回数を含む進捗状況を定期的に報告します。
4. オートモードは、目標が完了するか、最大反復回数に達するまで続きます。
5. オートモードに入る際に最大反復回数を指定できます（デフォルトは25回）。
6. Claudeは進捗状況や遭遇した障害に基づいてアプローチを動的に調整します。
7. TOOLCHECKERMODELがツールの使用と出力を検証し、信頼性を高めます。

オートモードの使用方法：
1. 入力を求められたら 'automode number' と入力します。numberは最大反復回数です。
2. プロンプトが表示されたらリクエストを入力します。
3. Claudeは自律的に作業し、各反復後に更新を提供します。
4. オートモードは、タスクが完了した時、最大反復回数に達した時、またはCtrl+Cを押した時に終了します。

### 📊 強化された差分ベースのファイル編集

Claude Engineerは、既存のファイルをより正確かつ制御された方法で修正できる改善された差分ベースのファイル編集システムをサポートしています。新しいワークフローには以下が含まれます：

1. 新しいコンテンツを提供せずに`edit_and_apply`関数を使用してファイルの全内容を読み取ります。
2. 新しいコンテンツを使用して`edit_and_apply`関数でファイルに変更を適用し、提案された変更の詳細な差分を表示します。
3. 高品質の修正を確保するために、専門的なコード編集タスクにCODEEDITORMODELを利用します。

ファイルを編集する際、Claudeは：

1. 提案された変更の詳細な差分を表示し、Richライブラリを使用してカラーコードで追加、削除、変更なしの行をハイライトします。
2. 不必要に機能を削除することなく、新しいコードの追加や既存コードの修正に焦点を当てます。
3. 追加された行数と削除された行数の要約を提供します。
4. 重複や不要な置換を避けるように慎重に変更を適用します。
5. ターゲットを絞った変更、コンテンツの追加、先頭への挿入、ファイル全体の内容の置換など、さまざまな編集シナリオをサポートします。
6. CODEEDITORMODELを使用して、コードの変更がベストプラクティスに従い、一貫性を維持することを確保します。

この機能により、Claudeは既存の機能の完全性を維持しながら、コードベースに対してターゲットを絞った改善を行う能力が向上します。

### 🧠 動的システムプロンプト

システムプロンプトは、スクリプトがオートモードであるかどうかに基づいて動的に更新されるようになりました。これにより、現在の操作モードに応じてより適切な指示と動作が可能になります：

1. 通常モードでは、Claudeは役立つ応答を提供し、必要に応じてツールを使用することに焦点を当てます。
2. オートモードでは、Claudeは自律的に作業し、目標を設定し、進捗状況を定期的に報告するよう指示されます。
3. システムプロンプトは特定のタスクに適応し、各シナリオでのClaudeのパフォーマンスを最適化します。

動的システムプロンプトにより、Claudeは異なるシナリオに適応し、より関連性の高い支援を提供する能力が向上します。

### 🔧 利用可能なツール

Claude Engineerには、さまざまなタスクを支援する強力なツールセットが付属しています：

1. create_folder：指定されたパスに新しいフォルダを作成します。
2. create_file：指定されたパスに新しいファイルをコンテンツと共に作成します。
3. edit_and_apply：ファイルの内容を読み取り、オプションで変更を適用します。
4. read_file：指定されたパスのファイルの内容を読み取ります。
5. list_files：指定されたフォルダ内のすべてのファイルとディレクトリをリストアップします。
6. tavily_search：Tavily APIを使用してWeb検索を実行し、最新の情報を取得します。
7. execute_code：分離された仮想環境でPythonコードを実行します。
8. stop_process：長時間実行されるコード実行を管理および停止します。
9. TOOLCHECKERMODEL：信頼性向上のためにツールの使用と出力を検証します。
10. CODEEDITORMODEL：高精度の専門的なコード編集タスクを実行します。
11. CODEEXECUTIONMODEL：コード実行結果を分析し、洞察を提供します。

これらのツールにより、Claudeはファイルシステムと対話し、プロジェクト構造を管理し、Webから情報を収集し、高度なコード編集を実行し、安全にコードを実行することができます。

### 🖼️ 画像分析

Claude Engineerは現在、画像分析機能をサポートしています。この機能を使用するには：

1. 入力を求められたら 'image' と入力します。
2. 画像ファイルをターミナルにドラッグ＆ドロップするか、ファイルパスを提供します。
3. 画像に関するプロンプトまたは質問を提供します。
4. Claudeが画像を分析し、あなたの質問に答えます。

この機能により、Claudeは図表、スクリーンショット、または開発作業に関連するその他の画像など、視覚的データを含むタスクの支援が可能になります。

### 🛡️ エラー処理とリカバリー

Claude Engineerは堅牢なエラー処理とリカバリーメカニズムを実装しています：

1. APIエラーやネットワーク問題の適切な処理。
2. 一時的な障害に対する自動再試行。
3. 必要に応じて、明確なエラーメッセージとユーザーアクションの提案。
4. デバッグと改善のためのエラーのロギング。
5. 重大でないエラー後の回復と操作の継続能力。
6. 必要に応じた長時間実行プロセスの安全な終了。

これらの機能により、予期せぬ問題や複雑なコード実行に直面しても、スムーズで信頼性の高いユーザー体験を確保します。

### 💾 チャットログの保存

Claude Engineerとの対話中、いつでも現在のチャットログを保存できます：

1. 入力を求められたら 'save' と入力します。
2. チャットログは、タイムスタンプを含むファイル名で現在のディレクトリに保存されます。
3. これらのログは後で参照したり、以前の会話を続けたりするために確認できます。

## 🧠 AIモデルと専門化されたエージェント

Claude Engineerは、専門的な機能を提供するために複数のAIモデルを利用しています：

1. MAINMODEL（Claude 3またはClaude 3.5）：一般的な対話とタスク処理を扱います。
2. TOOLCHECKERMODEL：信頼性を確保するために、様々なツールの使用と出力を検証します。
3. CODEEDITORMODEL：コード編集タスクを専門とし、高品質の修正を確保します。
4. CODEEXECUTIONMODEL：コード実行の結果を分析し、洞察を提供します。

これらのモデルが協力して、包括的でインテリジェントな開発支援体験を提供します。

## 👥 貢献

貢献は歓迎します！プルリクエストを気軽に提出してください。大きな変更については、まず問題を開いて、変更したい内容について議論してください。

## 📄 ライセンス

このプロジェクトはMITライセンスの下でライセンスされています - 詳細はLICENSEファイルを参照してください。

## スター履歴

[![Star History Chart](https://api.star-history.com/svg?repos=Doriandarko/claude-engineer&type=Date)](https://star-history.com/#Doriandarko/claude-engineer&Date)
